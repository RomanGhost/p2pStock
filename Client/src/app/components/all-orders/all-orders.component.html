<div class="container orders-container mt-5">
    <h1 class="text-center mb-4">üìã –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤</h1>
  
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
    <div *ngIf="isLoading" class="text-center">
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</p>
    </div>
  
    <!-- –û—à–∏–±–∫–∞ -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>
  
    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="filters-section mb-4">
      <form [formGroup]="filterForm" (ngSubmit)="filterOrders()" class="filters-row d-flex justify-content-between align-items-center">
        <div class="filter-item">
          <label for="typeFilter" class="form-label">–¢–∏–ø</label>
          <select id="typeFilter" formControlName="type" (change)="filterOrders()" class="form-select">
            <option value="">–í—Å–µ</option>
            <option *ngFor="let type of uniqueOrderTypes" [value]="type.name">{{ type.name }}</option>
          </select>
        </div>
        <div class="filter-item">
          <label for="cryptoFilter" class="form-label">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</label>
          <select id="cryptoFilter" formControlName="cryptoCode" (change)="filterOrders()" class="form-select">
            <option value="">–í—Å–µ</option>
            <option *ngFor="let crypto of uniqueCryptocurrencies" [value]="crypto.code">{{ crypto.name }}</option>
          </select>
        </div>
        <div class="filter-item">
          <label for="sortOrder" class="form-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
          <select id="sortOrder" formControlName="sortOrder" (change)="filterOrders()" class="form-select">
            <option value="desc">–ü–æ —É–±—ã–≤–∞–Ω–∏—é</option>
            <option value="asc">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
          </select>
        </div>
      </form>
    </div>    
  
    <!-- –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
    <section class="cards-section" *ngIf="!isLoading && !errorMessage">
      <div class="cards-grid">
          <div *ngFor="let order of filteredOrders" class="card-item" (click)="openCreateDealModal(order)">
          <div class="card-details">
            <div class="d-flex justify-content-between align-items-center">
              <h3 class="text-primary">–ó–∞–∫–∞–∑ #{{ order.id }}
                <span class="text-muted"> {{ order.cryptocurrencyCode }}</span>
              </h3>
              <p class="text-muted mt-2" style="font-size: 0.85em;">–°–æ–∑–¥–∞–Ω–æ: {{ order.createdAt | date: 'dd.MM.yyyy HH:mm' }}</p>
              <p class="text-danger font-weight-bold">–ò—Ç–æ–≥: {{ order.quantity * order.unitPrice | number: '1.2-2' }}</p>
            </div>
            <p class="text-muted mb-2"><strong>–¢–∏–ø:</strong> {{ order.typeName }}</p>
            <p class="mb-2"><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> {{ order.userLogin }}</p>
            <div class="d-flex justify-content-between align-items-center mt-3">
              <p class="mb-1"><strong>–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É:</strong> {{ order.unitPrice | number: '1.2-2' }}</p>
              <p class="mb-1"><strong>–ö–æ–ª-–≤–æ:</strong> {{ order.quantity }}</p>
            </div>
          </div>
        </div>
        </div>
    </section> 
    
    <app-create-deal *ngIf="isCreateDealModalOpen" [selectedOrder]="selectedOrder" (closeModalEvent)="closeCreateDealModal()"></app-create-deal>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <div *ngIf="totalPages > 1" class="pagination-section text-center">
      <button *ngIf="showBackButton()" (click)="onPageChange(page - 1)" class="btn btn-outline-primary mr-2">–ù–∞–∑–∞–¥</button>
      <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page + 1 }} –∏–∑ {{ totalPages }}</span>
      <button *ngIf="showForwardButton()" (click)="onPageChange(page + 1)" class="btn btn-outline-primary ml-2">–í–ø–µ—Ä–µ–¥</button>
    </div>
  
    <!-- –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
    <div class="pagination-options mt-3 text-center">
      <label for="sizeFilter">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:</label>
      <select id="sizeFilter" (change)="onSizeChange($event)" class="form-select d-inline-block w-auto">
        <option *ngFor="let size of availablePageSizes" [value]="size">{{ size }}</option>
      </select>
    </div>
  </div>
  