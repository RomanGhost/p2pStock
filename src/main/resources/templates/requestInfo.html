<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Request Info</title>
</head>
<body>
<div>
    <h2>Request Information</h2>
    <div>
        <label>Request Type: </label>
        <span th:text="${request.requestType.name}"></span>
    </div>
<!--    <div>-->
<!--        <label>Wallet: </label>-->
<!--        <span th:text="${request.wallet.name}"></span>-->
<!--    </div>-->
    <div>
        <label>User: </label>
        <span th:text="${request.user.login}"></span>
    </div>
<!--    <div>-->
<!--        <label>Card: </label>-->
<!--        <span th:text="${request.card.cardName}"></span>-->
<!--    </div>-->
    <div>
        <label>Request Status: </label>
        <span th:text="${request.requestStatus.name}"></span>
    </div>
    <div>
        <label>Price Per Unit: </label>
        <span th:text="${request.pricePerUnit}"></span>
    </div>
    <div>
        <label>Quantity: </label>
        <span th:text="${request.quantity}"></span>
    </div>
    <div>
        <label>Description: </label>
        <span th:text="${request.description}"></span>
    </div>
</div>
<br>
<br>
<div th:if="${isAccess}">
    <form action="#" th:action="@{'/platform/deal/add'}" method="post">
        <input type="hidden" th:name="requestId" th:value="${request.id}"/>
        <div th:if="${isBuying}">
            <label for="walletId">Select Wallet:</label>
            <select id="walletId" name="walletId">
                <option th:each="wallet : ${wallets}" th:value="${wallet.id}" th:text="${wallet.name}"></option>
            </select>
        </div>
        <div th:if="${!isBuying}">
            <label for="cardId">Select Card:</label>
            <select id="cardId" name="cardId">
                <option th:each="card : ${cards}" th:value="${card.id}" th:text="${card.cardName}"></option>
            </select>
        </div>

        <button type="submit">Create Deal</button>
    </form>
</div>

<div th:if="${isUserInitiator}">
    <form action="#" th:action="@{'/platform/request/' + ${request.id} + '/cancel'}" method="post">
        <button type="submit">Отменить заявку</button>
    </form>
</div>

<div th:if="${isModeration}">
    <h2><b>Внимание!</b></h2>
    Внимательно проверь поля заполненные пользоватлем<br>
    Проверь, есть ли недопустимые слова в комментарии, если все соответвует то одобри заявку<br>

    <form action="#" th:action="@{'/platform/manager/request/' + ${request.id} + '/moderation/accept'}" method="post">
        <button type="submit" name="action" value="accept">Одобрить заявку</button>
    </form>
    <form action="#" th:action="@{'/platform/manager/request/' + ${request.id} + '/moderation/change'}" method="post">
        <button type="submit" name="action" value="change">Отправить на изменение</button>
    </form>
    <form action="#" th:action="@{'/platform/manager/request/' + ${request.id} + '/moderation/discard'}" method="post">
        <button type="submit" name="action" value="discard">Закрыть заявку</button>
    </form>


</div>

</body>
</html>
